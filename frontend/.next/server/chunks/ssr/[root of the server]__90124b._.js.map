{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 135, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/GEMUEL/Documents/school-management-system/frontend/app/utils/apiClient.ts"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000/api';\r\n\r\nconst apiClient = axios.create({\r\n    baseURL: API_URL,\r\n    headers: {\r\n        'Content-Type': 'application/json',\r\n    },\r\n});\r\n\r\n// Add a request interceptor to include the token in headers\r\napiClient.interceptors.request.use((config) => {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n        config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    return config;\r\n});\r\n\r\nexport default apiClient;"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,UAAU,iEAAmC;AAEnD,MAAM,YAAY,qIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IAC3B,SAAS;IACT,SAAS;QACL,gBAAgB;IACpB;AACJ;AAEA,4DAA4D;AAC5D,UAAU,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAChC,MAAM,QAAQ,aAAa,OAAO,CAAC;IACnC,IAAI,OAAO;QACP,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;IACpD;IACA,OAAO;AACX;uCAEe"}},
    {"offset": {"line": 156, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 162, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/GEMUEL/Documents/school-management-system/frontend/app/utils/userContext.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { createContext, useContext, useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport apiClient from './apiClient';\r\n\r\ninterface User {\r\n    username: string;\r\n    role: string;\r\n}\r\n\r\ninterface UserContextType {\r\n    user: User | null;\r\n    isLoading: boolean;\r\n    error: string | null;\r\n}\r\n\r\nconst UserContext = createContext<UserContextType>({\r\n    user: null,\r\n    isLoading: true,\r\n    error: null\r\n});\r\n\r\n\r\nexport const UserProvider = ({ children }: { children: React.ReactNode }) => {\r\n    const [user, setUser] = useState<User | null>(null);\r\n    const [isLoading, setIsLoading] = useState<boolean>(true);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const router = useRouter();\r\n\r\n\r\n    useEffect(() => {\r\n        const fetchUser = async () => {\r\n            const token = localStorage.getItem('token');\r\n            if (!token) {\r\n                setIsLoading(false);\r\n                return;\r\n            }\r\n\r\n            try {\r\n                const res = await apiClient.get('/auth/user', {\r\n                    headers: {\r\n                        Authorization: `Bearer ${token}`,\r\n                    },\r\n                });\r\n                setUser(res.data);\r\n            } catch (err) {\r\n                console.error('Failed to fetch user:', err);\r\n                setError('Failed to fetch user data.');\r\n                localStorage.removeItem('token');\r\n            } finally {\r\n                setIsLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchUser();\r\n    }, [router]);\r\n\r\n\r\n    return (\r\n        <UserContext.Provider value={{ user, isLoading, error }}>\r\n            {children}\r\n        </UserContext.Provider>\r\n    );\r\n};\r\n\r\n\r\nexport const useUser = () => {\r\n    return useContext(UserContext);\r\n};"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAiBA,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,gBAAa,AAAD,EAAmB;IAC/C,MAAM;IACN,WAAW;IACX,OAAO;AACX;AAGO,MAAM,eAAe,CAAC,EAAE,QAAQ,EAAiC;IACpE,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe;IAC9C,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAW;IACpD,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAClD,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAGvB,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACN,MAAM,YAAY;YACd,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,IAAI,CAAC,OAAO;gBACR,aAAa;gBACb;YACJ;YAEA,IAAI;gBACA,MAAM,MAAM,MAAM,yHAAA,CAAA,UAAS,CAAC,GAAG,CAAC,cAAc;oBAC1C,SAAS;wBACL,eAAe,CAAC,OAAO,EAAE,OAAO;oBACpC;gBACJ;gBACA,QAAQ,IAAI,IAAI;YACpB,EAAE,OAAO,KAAK;gBACV,QAAQ,KAAK,CAAC,yBAAyB;gBACvC,SAAS;gBACT,aAAa,UAAU,CAAC;YAC5B,SAAU;gBACN,aAAa;YACjB;QACJ;QAEA;IACJ,GAAG;QAAC;KAAO;IAGX,qBACI,8OAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAW;QAAM;kBACjD;;;;;;AAGb;AAGO,MAAM,UAAU;IACnB,OAAO,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAAE;AACtB"}},
    {"offset": {"line": 227, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}